<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Basic Block Example | NeuralHDL</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.5.2">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-mermaid-2/bower_components/mermaid/dist/mermaid.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-katex/katex.min.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../blocks/test.html" />
    
    
    <link rel="prev" href="../blocks/index.html" />
    

        <script src="../gitbook/plugins/gitbook-plugin-mermaid-2/bower_components/mermaid/dist/mermaid.min.js"></script><link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-mermaid-2/bower_components/mermaid/dist/mermaid.forest.css"></link>
    </head>
    <body>
        
        
    <div class="book" data-level="4.1" data-chapter-title="Basic Block Example" data-filepath="blocks/simple.md" data-basepath=".." data-revision="Thu Jul 20 2017 17:12:06 GMT-0700 (PDT)">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="introduction/index.html">
            
                
                    <a href="../introduction/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Introduction
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="introduction/getting-started.html">
            
                
                    <a href="../introduction/getting-started.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Getting Started
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="introduction/basic-example.html">
            
                
                    <a href="../introduction/basic-example.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Examples
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="introduction/background.html">
            
                
                    <a href="../introduction/background.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Background
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="dsl/index.html">
            
                
                    <a href="../dsl/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Tool Usage
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="architecture/index.html">
            
                
                    <a href="../architecture/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Hardware Architecture
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="architecture/stage.html">
            
                
                    <a href="../architecture/stage.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Neural Stage
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="architecture/feedforward.html">
            
                
                    <a href="../architecture/feedforward.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.</b>
                        
                        Feedforward
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="architecture/update.html">
            
                
                    <a href="../architecture/update.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.</b>
                        
                        Tap Update
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="architecture/backpropagate.html">
            
                
                    <a href="../architecture/backpropagate.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.3.</b>
                        
                        Error Back Propagation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="architecture/memory.html">
            
                
                    <a href="../architecture/memory.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.4.</b>
                        
                        Memory Layout
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="architecture/future.html">
            
                
                    <a href="../architecture/future.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Future Directions
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="blocks/index.html">
            
                
                    <a href="../blocks/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Building Blocks
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="4.1" data-path="blocks/simple.html">
            
                
                    <a href="../blocks/simple.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Basic Block Example
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="blocks/test.html">
            
                
                    <a href="../blocks/test.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Basic Test Example
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="blocks/Neuron.html">
            
                
                    <a href="../blocks/Neuron.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Neuron
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="blocks/Sigmoid.html">
            
                
                    <a href="../blocks/Sigmoid.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Sigmoid
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="blocks/NeuralStage.html">
            
                
                    <a href="../blocks/NeuralStage.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Neural Stage
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="language/index.html">
            
                
                    <a href="../language/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Language Description
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >NeuralHDL</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="simple-block-description">Simple Block Description</h1>
<p>A description of a neuron(MAC) is shown below. This is a relatively simple example but in general what the descriptions of more complicated blocks look like. For this you can see that there is no concept of buswidths or even signal types. All operations on the signals depend on the signal type. This means that a fixed point signal will automatically create a fixed point description while a floating point signal will create a floating point signal. This leads to fully generic code.  </p>
<pre><code class="lang-scala">
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Neuron</span>(</span>proto:<span class="hljs-type">SignalTrait</span>)(<span class="hljs-keyword">implicit</span> <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">clk</span>:</span><span class="hljs-type">ClockControl</span>) <span class="hljs-keyword">extends</span> <span class="hljs-type">ComplexSegment</span>  {


  <span class="hljs-comment">// Input/Output Declarations</span>
  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">dataOut</span>:</span><span class="hljs-type">SignalTrait</span> = proto.newSignal(name = <span class="hljs-string">&quot;data_out&quot;</span>,opType = <span class="hljs-type">OUTPUT</span>)
  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">dataIn</span>:</span><span class="hljs-type">SignalTrait</span> = proto.newSignal(name = <span class="hljs-string">&quot;data_in&quot;</span>,opType = <span class="hljs-type">INPUT</span>)
  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">taps</span>:</span><span class="hljs-type">SignalTrait</span> = proto.newSignal(name = <span class="hljs-string">&quot;taps&quot;</span>,opType = <span class="hljs-type">INPUT</span>)
  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">bias</span>:</span><span class="hljs-type">SignalTrait</span> = proto.newSignal(name = <span class="hljs-string">&quot;bias&quot;</span>,opType = <span class="hljs-type">INPUT</span>)

  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">internalSignal</span> =</span> signal(dataOut.newSignal(name = dataOut.appendName(<span class="hljs-string">&quot;tap_data_out&quot;</span>),<span class="hljs-type">OpType</span>.<span class="hljs-type">Signal</span>))

  <span class="hljs-comment">// MAC Operation</span>
  internalSignal := dataIn times taps
  dataOut        := internalSignal plus bias

  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">result</span> =</span> dataOut.newSignal(name = dataOut.appendName(<span class="hljs-string">&quot;result&quot;</span>))

  <span class="hljs-comment">// Convenience information to allow automatic block testing</span>
  <span class="hljs-comment">// This is only required when the operation needs to work both inside a module and as a segment</span>
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inputs</span>:</span> <span class="hljs-type">Seq</span>[<span class="hljs-type">SignalTrait</span>] = {
    <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">clkSignals</span>   =</span> clk.allSignals(<span class="hljs-type">OpType</span>.<span class="hljs-type">Input</span>)
    <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">inputSignals</span> =</span> <span class="hljs-type">List</span>(dataIn,taps,bias)
    clkSignals ::: inputSignals
  }

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">outputs</span>:</span><span class="hljs-type">List</span>[<span class="hljs-type">SignalTrait</span>] = <span class="hljs-type">List</span>(dataOut)


}
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../blocks/index.html" class="navigation navigation-prev " aria-label="Previous page: Building Blocks"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../blocks/test.html" class="navigation navigation-next " aria-label="Next page: Basic Test Example"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-mermaid-2/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"mermaid-2":{"theme":"forest"},"katex":{},"highlight":{},"search":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"livereload":{}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
